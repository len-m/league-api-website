{"ast":null,"code":"var _jsxFileName = \"C:\\\\website\\\\client\\\\src\\\\App\\\\pages\\\\myslibros\\\\LeagueProfile.js\";\n//TODO: own css for myslibros page\nimport React, { useEffect, useState } from 'react';\nimport '../../App.css';\nimport { getPlayerIconPNGLink, getPlayerLevel, getFlexRank, get_Solo_Duo_Rank } from './LeagueOfLegendsApi.js';\n/**\r\n * League player profile for Myslibros\r\n */\n\nfunction LeagueProfile(props) {\n  /*\r\n      useEffect(() => {\r\n          fetchPlayers();\r\n      }, []); \r\n      */\n  //const [player, setPlayer] = useState([]);\n  useEffect(() => {\n    var post_url = \"http://localhost:3001/api/leagueoflegends/players/\" + props.leagueName; //sendPostRequest(post_url);\n\n    retrievePostRequest(post_url);\n  }, []);\n\n  const sendPostRequest = async url => {\n    var xmlhttp = new XMLHttpRequest();\n    xmlhttp.open(\"POST\", url);\n    xmlhttp.withCredentials = true;\n    xmlhttp.setRequestHeader(\"Content-Type\", \"application/json\");\n    const json = {\n      \"summonerName\": props.leagueName,\n      \"id\": \"3\"\n    };\n    xmlhttp.send(json);\n  };\n\n  const retrievePostRequest = async url => {\n    const rawResponse = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      } //,\n      //body: JSON.stringify({a: 1, b: 'Textual content'})\n\n    }); //const content = await rawResponse.json();\n    //console.log(rawResponse);\n  };\n  /*\r\n  \n  //BAD !!! TODO: http://localhost:3001/api/leagueoflegends/players/{playerName} post fetch data\r\n   let player = {}; \r\n   useEffect(() => {\r\n       fetch('/api/leagueoflegends/players')\r\n       .then(res => res.json())\r\n       .then(players => {\r\n           let isCached = false;\r\n           for (var i = 0; i < players.length; i++) {\r\n               if (players[i].summonerName === props.leagueName) {\r\n                   player = players[i];\r\n                   isCached = true;\r\n                   break;\r\n               }\r\n           }\r\n           if (isCached === false) {\r\n               console.log(props.leagueName + \" musst be cached\");\r\n               //cache player\r\n  \n     \r\n               var post_url = \"http://localhost:3001/api/leagueoflegends/players/\" + props.leagueName;\r\n                 //send post request\r\n               var xmlhttp = new XMLHttpRequest();\r\n               xmlhttp.onreadystatechange = function () { };\r\n               xmlhttp.open(\"POST\", post_url);\r\n               xmlhttp.withCredentials = true;\r\n               xmlhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n               const json = {\"summonerName\": props.leagueName, \"id\" : \"3\"};\r\n               xmlhttp.send({});\r\n                 //retreve post request\r\n               (async () => {\r\n                   const rawResponse = await fetch(post_url, {\r\n                     method: 'POST',\r\n                     headers: {\r\n                       'Accept': 'application/json',\r\n                       'Content-Type': 'application/json'\r\n                     }\r\n                     //,\r\n                     //body: JSON.stringify({a: 1, b: 'Textual content'})\r\n                   });\r\n                   //const content = await rawResponse.json();\r\n                   //console.log(rawResponse);\r\n                 })();\r\n             }\r\n       }).catch((error) => {\r\n           //player isnt in cache\r\n           //=> add him to cache\r\n           console.error('Error:', error);\r\n       });\r\n   }, [])\r\n   */\n\n  /*const fetchPlayers = async () => {\r\n      var json = {};\r\n      json.name = props.leagueName;\r\n      json.level = fetch('/api/leagueoflegends/players')\r\n          .then(res => res.json())\r\n          .then(players => ) \r\n          \r\n          \r\n          //await getPlayerLevel(props.leagueName);\r\n      json.iconSrc = await getPlayerIconPNGLink(props.leagueName);\r\n      json.flexRank = await getFlexRank(props.leagueName);\r\n      json.soloDuoRank = await get_Solo_Duo_Rank(props.leagueName);\r\n      //json.lane = await getOverallLane(props.leagueName);\r\n      const player = JSON.parse(JSON.stringify(json));\r\n      setPlayer(player);\r\n    };*/\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"league-profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"league-profile-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"league-profile-header-picture-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"league-profile-header-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"league-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default LeagueProfile;","map":{"version":3,"sources":["C:/website/client/src/App/pages/myslibros/LeagueProfile.js"],"names":["React","useEffect","useState","getPlayerIconPNGLink","getPlayerLevel","getFlexRank","get_Solo_Duo_Rank","LeagueProfile","props","post_url","leagueName","retrievePostRequest","sendPostRequest","url","xmlhttp","XMLHttpRequest","open","withCredentials","setRequestHeader","json","send","rawResponse","fetch","method","headers"],"mappings":";AAAA;AAEA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAO,eAAP;AACA,SAAQC,oBAAR,EAA8BC,cAA9B,EAA8CC,WAA9C,EAA2DC,iBAA3D,QAAmF,yBAAnF;AAEA;;;;AAGA,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAC9B;;;;;AAKI;AAGAP,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIQ,QAAQ,GAAG,uDAAuDD,KAAK,CAACE,UAA5E,CADY,CAIZ;;AACAC,IAAAA,mBAAmB,CAACF,QAAD,CAAnB;AAGH,GARQ,EAQN,EARM,CAAT;;AAWA,QAAMG,eAAe,GAAG,MAAOC,GAAP,IAAe;AACnC,QAAIC,OAAO,GAAG,IAAIC,cAAJ,EAAd;AACAD,IAAAA,OAAO,CAACE,IAAR,CAAa,MAAb,EAAqBH,GAArB;AACAC,IAAAA,OAAO,CAACG,eAAR,GAA0B,IAA1B;AACAH,IAAAA,OAAO,CAACI,gBAAR,CAAyB,cAAzB,EAAyC,kBAAzC;AACA,UAAMC,IAAI,GAAG;AAAC,sBAAgBX,KAAK,CAACE,UAAvB;AAAmC,YAAO;AAA1C,KAAb;AACAI,IAAAA,OAAO,CAACM,IAAR,CAAaD,IAAb;AACH,GAPD;;AAUA,QAAMR,mBAAmB,GAAG,MAAOE,GAAP,IAAe;AACvC,UAAMQ,WAAW,GAAG,MAAMC,KAAK,CAACT,GAAD,EAAM;AACjCU,MAAAA,MAAM,EAAE,MADyB;AAEjCC,MAAAA,OAAO,EAAE;AACP,kBAAU,kBADH;AAEP,wBAAgB;AAFT,OAFwB,CAMjC;AACA;;AAPiC,KAAN,CAA/B,CADuC,CAUrC;AACN;AACC,GAZD;AAcD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DC;;;;;;;;;;;;;;;;;;AAiBA,sBACI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,yCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAII;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CADJ,eAUI;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,CADJ;AAqBH;;AAED,eAAejB,aAAf","sourcesContent":["//TODO: own css for myslibros page\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport '../../App.css';\r\nimport {getPlayerIconPNGLink, getPlayerLevel, getFlexRank, get_Solo_Duo_Rank} from './LeagueOfLegendsApi.js';\r\n\r\n/**\r\n * League player profile for Myslibros\r\n */\r\nfunction LeagueProfile(props) {\r\n/*\r\n    useEffect(() => {\r\n        fetchPlayers();\r\n    }, []); \r\n    */\r\n    //const [player, setPlayer] = useState([]);\r\n\r\n   \r\n    useEffect(() => {\r\n        var post_url = \"http://localhost:3001/api/leagueoflegends/players/\" + props.leagueName;\r\n       \r\n\r\n        //sendPostRequest(post_url);\r\n        retrievePostRequest(post_url);\r\n\r\n\r\n    }, []);\r\n\r\n\r\n    const sendPostRequest = async (url) => {\r\n        var xmlhttp = new XMLHttpRequest();\r\n        xmlhttp.open(\"POST\", url);\r\n        xmlhttp.withCredentials = true;\r\n        xmlhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n        const json = {\"summonerName\": props.leagueName, \"id\" : \"3\"};\r\n        xmlhttp.send(json);\r\n    };\r\n\r\n    \r\n    const retrievePostRequest = async (url) => {\r\n        const rawResponse = await fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n              'Accept': 'application/json',\r\n              'Content-Type': 'application/json'\r\n            }\r\n            //,\r\n            //body: JSON.stringify({a: 1, b: 'Textual content'})\r\n          });\r\n          //const content = await rawResponse.json();\r\n    //console.log(rawResponse);\r\n    };  \r\n\r\n   /*\r\n\r\n\r\n   //BAD !!! TODO: http://localhost:3001/api/leagueoflegends/players/{playerName} post fetch data\r\n    let player = {}; \r\n    useEffect(() => {\r\n        fetch('/api/leagueoflegends/players')\r\n        .then(res => res.json())\r\n        .then(players => {\r\n            let isCached = false;\r\n            for (var i = 0; i < players.length; i++) {\r\n                if (players[i].summonerName === props.leagueName) {\r\n                    player = players[i];\r\n                    isCached = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (isCached === false) {\r\n                console.log(props.leagueName + \" musst be cached\");\r\n                //cache player\r\n\r\n\r\n\r\n    \r\n                var post_url = \"http://localhost:3001/api/leagueoflegends/players/\" + props.leagueName;\r\n\r\n                //send post request\r\n                var xmlhttp = new XMLHttpRequest();\r\n                xmlhttp.onreadystatechange = function () { };\r\n                xmlhttp.open(\"POST\", post_url);\r\n                xmlhttp.withCredentials = true;\r\n                xmlhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n                const json = {\"summonerName\": props.leagueName, \"id\" : \"3\"};\r\n                xmlhttp.send({});\r\n\r\n                //retreve post request\r\n                (async () => {\r\n                    const rawResponse = await fetch(post_url, {\r\n                      method: 'POST',\r\n                      headers: {\r\n                        'Accept': 'application/json',\r\n                        'Content-Type': 'application/json'\r\n                      }\r\n                      //,\r\n                      //body: JSON.stringify({a: 1, b: 'Textual content'})\r\n                    });\r\n                    //const content = await rawResponse.json();\r\n                    //console.log(rawResponse);\r\n                  })();\r\n\r\n            }\r\n        }).catch((error) => {\r\n            //player isnt in cache\r\n            //=> add him to cache\r\n            console.error('Error:', error);\r\n        });\r\n    }, [])\r\n\r\n  */\r\n\r\n    \r\n        \r\n\r\n    /*const fetchPlayers = async () => {\r\n        var json = {};\r\n        json.name = props.leagueName;\r\n        json.level = fetch('/api/leagueoflegends/players')\r\n            .then(res => res.json())\r\n            .then(players => ) \r\n            \r\n            \r\n            //await getPlayerLevel(props.leagueName);\r\n        json.iconSrc = await getPlayerIconPNGLink(props.leagueName);\r\n        json.flexRank = await getFlexRank(props.leagueName);\r\n        json.soloDuoRank = await get_Solo_Duo_Rank(props.leagueName);\r\n        //json.lane = await getOverallLane(props.leagueName);\r\n        const player = JSON.parse(JSON.stringify(json));\r\n        setPlayer(player);\r\n      };*/\r\n    \r\n    return (\r\n        <div className=\"league-profile\">\r\n            <div className=\"league-profile-header\">\r\n                <div className=\"league-profile-header-picture-container\">\r\n                    {/*<img className=\"league-profile-picture\" src={player.iconSrc} alt=\"\"></img>*/}\r\n                </div>\r\n                <div className=\"league-profile-header-text\">\r\n                    {/*<h1>{player.name}</h1>\r\n                    <h1>Level: {player.level}</h1>*/}\r\n                </div>\r\n            </div>\r\n            <div className=\"league-info\">\r\n                {\r\n                    //img for solo duo rank: `opgg-static.akamaized.net/images/medals/${player.soloDuoRank}.png?image=q_auto&v=1`\r\n                    //img for flex: `opgg-static.akamaized.net/images/medals/${player.flexRank}.png?image=q_auto&v=1`\r\n                }\r\n                {/*<h1>{player.soloDuoRank}</h1>\r\n                <h1>{player.flexRank}</h1>*/}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LeagueProfile;"]},"metadata":{},"sourceType":"module"}