{"ast":null,"code":"var _jsxFileName = \"C:\\\\website\\\\client\\\\src\\\\App\\\\pages\\\\myslibros\\\\LeagueProfile.js\";\n//TODO: own css for myslibros page\nimport React, { useEffect, useState } from 'react';\nimport '../../App.css';\nimport { getPlayerIconPNGLink, getPlayerLevel, getFlexRank, get_Solo_Duo_Rank } from './LeagueOfLegendsApi.js';\n/**\r\n * League player profile for Myslibros\r\n */\n\nfunction LeagueProfile(props) {\n  /*\r\n      useEffect(() => {\r\n          fetchPlayers();\r\n      }, []); \r\n      */\n  //const [player, setPlayer] = useState([]);\n  let player = {};\n  useEffect(() => {\n    fetch('/api/leagueoflegends/players').then(res => res.json()).then(players => {\n      let isCached = false;\n\n      for (var i = 0; i < players.length; i++) {\n        if (players[i].summonerName === props.leagueName) {\n          player = players[i];\n          isCached = true;\n          break;\n        }\n      }\n\n      if (isCached === false) {\n        console.log(props.leagueName + \" musst be cached\"); //cache player\n\n        /* //Create a call to the open() method and pass in \"POST\" as the first argument and a URL as the second argument.\r\n         var xmlhttp = new XMLHttpRequest();\r\n         console.log(props.leagueName);\r\n         var url = \"http://localhost:3001/api/leagueoflegends/players/\" + props.leagueName;\r\n         xmlhttp.open(\"POST\", url);\r\n         xmlhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n         //xmlhttp.setRequestHeader(\"Access-Control-Allow-Origin\", \"*\");\r\n         const json = {\"summonerName\": props.leagueName, \"id\" : 3};\r\n         xmlhttp.send(json);\r\n        */\n\n        var post_url = \"http://localhost:3001/api/leagueoflegends/players/\" + props.leagueName; //send post request\n\n        var xmlhttp = new XMLHttpRequest();\n\n        xmlhttp.onreadystatechange = function () {\n          /* .. */\n        };\n\n        xmlhttp.open(\"POST\", post_url);\n        xmlhttp.withCredentials = true;\n        xmlhttp.setRequestHeader(\"Content-Type\", \"application/json\");\n        const json = {\n          \"summonerName\": props.leagueName,\n          \"id\": 3\n        };\n        xmlhttp.send(json); //retreve post request\n\n        (async () => {\n          const rawResponse = await fetch(post_url, {\n            method: 'POST',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            } //,\n            //body: JSON.stringify({a: 1, b: 'Textual content'})\n\n          });\n          const content = await rawResponse.json();\n          console.log(content);\n        })();\n      }\n    }).catch(error => {\n      //player isnt in cache\n      //=> add him to cache\n      console.error('Error:', error);\n    });\n  }, []);\n  /*const fetchPlayers = async () => {\r\n      var json = {};\r\n      json.name = props.leagueName;\r\n      json.level = fetch('/api/leagueoflegends/players')\r\n          .then(res => res.json())\r\n          .then(players => ) \r\n          \r\n          \r\n          //await getPlayerLevel(props.leagueName);\r\n      json.iconSrc = await getPlayerIconPNGLink(props.leagueName);\r\n      json.flexRank = await getFlexRank(props.leagueName);\r\n      json.soloDuoRank = await get_Solo_Duo_Rank(props.leagueName);\r\n      //json.lane = await getOverallLane(props.leagueName);\r\n      const player = JSON.parse(JSON.stringify(json));\r\n      setPlayer(player);\r\n    };*/\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"league-profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"league-profile-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"league-profile-header-picture-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"league-profile-header-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"league-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default LeagueProfile;","map":{"version":3,"sources":["C:/website/client/src/App/pages/myslibros/LeagueProfile.js"],"names":["React","useEffect","useState","getPlayerIconPNGLink","getPlayerLevel","getFlexRank","get_Solo_Duo_Rank","LeagueProfile","props","player","fetch","then","res","json","players","isCached","i","length","summonerName","leagueName","console","log","post_url","xmlhttp","XMLHttpRequest","onreadystatechange","open","withCredentials","setRequestHeader","send","rawResponse","method","headers","content","catch","error"],"mappings":";AAAA;AAEA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAO,eAAP;AACA,SAAQC,oBAAR,EAA8BC,cAA9B,EAA8CC,WAA9C,EAA2DC,iBAA3D,QAAmF,yBAAnF;AAEA;;;;AAGA,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAC9B;;;;;AAKG;AAEC,MAAIC,MAAM,GAAG,EAAb;AACAR,EAAAA,SAAS,CAAC,MAAM;AACZS,IAAAA,KAAK,CAAC,8BAAD,CAAL,CACCC,IADD,CACMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADb,EAECF,IAFD,CAEMG,OAAO,IAAI;AACb,UAAIC,QAAQ,GAAG,KAAf;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,OAAO,CAACG,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACrC,YAAIF,OAAO,CAACE,CAAD,CAAP,CAAWE,YAAX,KAA4BV,KAAK,CAACW,UAAtC,EAAkD;AAC9CV,UAAAA,MAAM,GAAGK,OAAO,CAACE,CAAD,CAAhB;AACAD,UAAAA,QAAQ,GAAG,IAAX;AACA;AACH;AACJ;;AACD,UAAIA,QAAQ,KAAK,KAAjB,EAAwB;AACpBK,QAAAA,OAAO,CAACC,GAAR,CAAYb,KAAK,CAACW,UAAN,GAAmB,kBAA/B,EADoB,CAEpB;;AAKD;;;;;;;;;;;AAUC,YAAIG,QAAQ,GAAG,uDAAuDd,KAAK,CAACW,UAA5E,CAjBoB,CAmBpB;;AACA,YAAII,OAAO,GAAG,IAAIC,cAAJ,EAAd;;AACAD,QAAAA,OAAO,CAACE,kBAAR,GAA6B,YAAY;AAAE;AAAU,SAArD;;AACAF,QAAAA,OAAO,CAACG,IAAR,CAAa,MAAb,EAAqBJ,QAArB;AACAC,QAAAA,OAAO,CAACI,eAAR,GAA0B,IAA1B;AACAJ,QAAAA,OAAO,CAACK,gBAAR,CAAyB,cAAzB,EAAyC,kBAAzC;AACA,cAAMf,IAAI,GAAG;AAAC,0BAAgBL,KAAK,CAACW,UAAvB;AAAmC,gBAAO;AAA1C,SAAb;AACAI,QAAAA,OAAO,CAACM,IAAR,CAAahB,IAAb,EA1BoB,CA4BpB;;AACA,SAAC,YAAY;AACT,gBAAMiB,WAAW,GAAG,MAAMpB,KAAK,CAACY,QAAD,EAAW;AACxCS,YAAAA,MAAM,EAAE,MADgC;AAExCC,YAAAA,OAAO,EAAE;AACP,wBAAU,kBADH;AAEP,8BAAgB;AAFT,aAF+B,CAMxC;AACA;;AAPwC,WAAX,CAA/B;AASA,gBAAMC,OAAO,GAAG,MAAMH,WAAW,CAACjB,IAAZ,EAAtB;AACAO,UAAAA,OAAO,CAACC,GAAR,CAAYY,OAAZ;AACD,SAZH;AAcH;AACJ,KAvDD,EAuDGC,KAvDH,CAuDUC,KAAD,IAAW;AAChB;AACA;AACAf,MAAAA,OAAO,CAACe,KAAR,CAAc,QAAd,EAAwBA,KAAxB;AACH,KA3DD;AA4DH,GA7DQ,EA6DN,EA7DM,CAAT;AAoEA;;;;;;;;;;;;;;;;;AAiBA,sBACI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,yCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAII;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CADJ,eAUI;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,CADJ;AAqBH;;AAED,eAAe5B,aAAf","sourcesContent":["//TODO: own css for myslibros page\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport '../../App.css';\r\nimport {getPlayerIconPNGLink, getPlayerLevel, getFlexRank, get_Solo_Duo_Rank} from './LeagueOfLegendsApi.js';\r\n\r\n/**\r\n * League player profile for Myslibros\r\n */\r\nfunction LeagueProfile(props) {\r\n/*\r\n    useEffect(() => {\r\n        fetchPlayers();\r\n    }, []); \r\n    */\r\n   //const [player, setPlayer] = useState([]);\r\n\r\n    let player = {}; \r\n    useEffect(() => {\r\n        fetch('/api/leagueoflegends/players')\r\n        .then(res => res.json())\r\n        .then(players => {\r\n            let isCached = false;\r\n            for (var i = 0; i < players.length; i++) {\r\n                if (players[i].summonerName === props.leagueName) {\r\n                    player = players[i];\r\n                    isCached = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (isCached === false) {\r\n                console.log(props.leagueName + \" musst be cached\");\r\n                //cache player\r\n\r\n\r\n\r\n    \r\n               /* //Create a call to the open() method and pass in \"POST\" as the first argument and a URL as the second argument.\r\n                var xmlhttp = new XMLHttpRequest();\r\n                console.log(props.leagueName);\r\n                var url = \"http://localhost:3001/api/leagueoflegends/players/\" + props.leagueName;\r\n                xmlhttp.open(\"POST\", url);\r\n                xmlhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n                //xmlhttp.setRequestHeader(\"Access-Control-Allow-Origin\", \"*\");\r\n                const json = {\"summonerName\": props.leagueName, \"id\" : 3};\r\n                xmlhttp.send(json);\r\n*/\r\n                var post_url = \"http://localhost:3001/api/leagueoflegends/players/\" + props.leagueName;\r\n\r\n                //send post request\r\n                var xmlhttp = new XMLHttpRequest();\r\n                xmlhttp.onreadystatechange = function () { /* .. */ };\r\n                xmlhttp.open(\"POST\", post_url);\r\n                xmlhttp.withCredentials = true;\r\n                xmlhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n                const json = {\"summonerName\": props.leagueName, \"id\" : 3};\r\n                xmlhttp.send(json);\r\n\r\n                //retreve post request\r\n                (async () => {\r\n                    const rawResponse = await fetch(post_url, {\r\n                      method: 'POST',\r\n                      headers: {\r\n                        'Accept': 'application/json',\r\n                        'Content-Type': 'application/json'\r\n                      }\r\n                      //,\r\n                      //body: JSON.stringify({a: 1, b: 'Textual content'})\r\n                    });\r\n                    const content = await rawResponse.json();\r\n                    console.log(content);\r\n                  })();\r\n\r\n            }\r\n        }).catch((error) => {\r\n            //player isnt in cache\r\n            //=> add him to cache\r\n            console.error('Error:', error);\r\n        });\r\n    }, [])\r\n\r\n  \r\n\r\n    \r\n        \r\n\r\n    /*const fetchPlayers = async () => {\r\n        var json = {};\r\n        json.name = props.leagueName;\r\n        json.level = fetch('/api/leagueoflegends/players')\r\n            .then(res => res.json())\r\n            .then(players => ) \r\n            \r\n            \r\n            //await getPlayerLevel(props.leagueName);\r\n        json.iconSrc = await getPlayerIconPNGLink(props.leagueName);\r\n        json.flexRank = await getFlexRank(props.leagueName);\r\n        json.soloDuoRank = await get_Solo_Duo_Rank(props.leagueName);\r\n        //json.lane = await getOverallLane(props.leagueName);\r\n        const player = JSON.parse(JSON.stringify(json));\r\n        setPlayer(player);\r\n      };*/\r\n    \r\n    return (\r\n        <div className=\"league-profile\">\r\n            <div className=\"league-profile-header\">\r\n                <div className=\"league-profile-header-picture-container\">\r\n                    {/*<img className=\"league-profile-picture\" src={player.iconSrc} alt=\"\"></img>*/}\r\n                </div>\r\n                <div className=\"league-profile-header-text\">\r\n                    {/*<h1>{player.name}</h1>\r\n                    <h1>Level: {player.level}</h1>*/}\r\n                </div>\r\n            </div>\r\n            <div className=\"league-info\">\r\n                {\r\n                    //img for solo duo rank: `opgg-static.akamaized.net/images/medals/${player.soloDuoRank}.png?image=q_auto&v=1`\r\n                    //img for flex: `opgg-static.akamaized.net/images/medals/${player.flexRank}.png?image=q_auto&v=1`\r\n                }\r\n                {/*<h1>{player.soloDuoRank}</h1>\r\n                <h1>{player.flexRank}</h1>*/}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LeagueProfile;"]},"metadata":{},"sourceType":"module"}